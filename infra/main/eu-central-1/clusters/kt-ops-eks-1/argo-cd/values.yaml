---
fullnameOverride: "argo-cd"
global:
  securityContext:
    runAsNonRoot: true
    runAsUser: 999
controller:
  containerSecurityContext:
    allowPrivilegeEscalation: false
  replica: 1
dex:
  containerSecurityContext:
    allowPrivilegeEscalation: false
redis:
  containerSecurityContext:
    allowPrivilegeEscalation: false
repoServer:
  replicas: 1
  containerSecurityContext:
    allowPrivilegeEscalation: false
  serviceAccount:
    automountServiceAccountToken: true
    annotations:
      eks.amazonaws.com/role-arn: ${kms_access_role_arn}
server:
  replicas: 1
  containerSecurityContext:
    allowPrivilegeEscalation: false
#  certificate:
#    enabled: true
#    domain: ${argocd_fqdn}
#    issuer:
#      kind: ClusterIssuer
#      name: letsencrypt
#    additionalHosts: []
#    secretName: argocd-server-tls
#  ingress:
#    enabled: true
#    https: true
#    hosts:
#      - ${argocd_fqdn}
#    ingressClassName: nginx
#    annotations:
#      cert-manager.io/cluster-issuer: letsencrypt
#      kubernetes.io/ingress.class: nginx
#      kubernetes.io/tls-acme: "true"
#      nginx.ingress.kubernetes.io/ssl-passthrough: "true"
#      nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
#      nginx.ingress.kubernetes.io/whitelist-source-range: ${allowed_cidr}
#    tls:
#      - secretName: argocd-ingress-tls
#        hosts:
#          - ${argocd_fqdn}
  config:
    accounts.image-updater: apiKey
    accounts.github-runner: login
    helm.valuesFileSchemes: https, http
    url: https://${argocd_fqdn}

configs:
  credentialTemplates:
    argo-apps-creds:
      url: https://github.com/lukas-pastva/kt-eks-gitops
      username: lpastva
      password: "${argocd_git_token}"
  repositories:
    argo-apps:
      name: argo-apps
      url: https://github.com/lukas-pastva/kt-eks-gitops
      project: "${full_name}"
      type: git